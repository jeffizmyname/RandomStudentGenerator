<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="RandomStudentGenerator.CustomControls.StudentsList">
    <ContentView.Resources>
        <StyleSheet Source="/Styles/List.css" />
    </ContentView.Resources>
    <Grid StyleClass="tableWrapper" RowDefinitions="*, 80" RowSpacing="20">
        <ScrollView Grid.Row="0">
            <StackLayout>
                <Grid StyleClass="header" ColumnDefinitions="1*, 3*, 3*, *">
                    <Label Grid.Column="0" Text="Nr"/>
                    <Label Grid.Column="1" Text="Student"/>
                    <Label Grid.Column="2" Text="Attendance"/>
                    <DatePicker StyleClass="datePicker" Grid.Column="3"/>
                </Grid>
                <CollectionView x:Name="studentsList" ItemsSource="{Binding Students}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <StackLayout StyleClass="studentWrapper">
                                <Grid StyleClass="studentGrid" ColumnDefinitions="1*, 3*, 4*">
                                    <Label Grid.Column="0" Text="{Binding Id}" />
                                    <HorizontalStackLayout Grid.Column="1">
                                        <Entry Text="{Binding Name}" StyleClass="listEntry"/>
                                        <Entry Text="{Binding Surname}" StyleClass="listEntry"/>
                                    </HorizontalStackLayout>
                                    <CheckBox Grid.Column="2" IsChecked="{Binding currentPresence.isPresent}" />
                                </Grid>
                            </StackLayout>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </StackLayout>
        </ScrollView>

        <Frame StyleClass="box, addStudentBox" Grid.Row="1">
            <FlexLayout StyleClass="addStudentFlex">
                <Entry x:Name="newStudentName" Placeholder="Enter Student Name" StyleClass="newStudentEntry"/>
                <Entry x:Name="newStudentSurname" Placeholder="Enter Student Surname" StyleClass="newStudentEntry"/>
                <Button x:Name="addStudentButton" Text="Add Student" Clicked="addStudentButton_Clicked" StyleClass="button"/>
            </FlexLayout>
        </Frame>
    </Grid>
</ContentView>
